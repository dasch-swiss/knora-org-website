<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Reading and Searching Resources &#8212; Knora 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="KnarQL: Knora Query Language" href="knarql-syntax.html" />
    <link rel="prev" title="Knora IRIs" href="knora-iris.html" /> 
  </head>
  <body role="document">
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="../../index.html">Knora 0.1 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="knora-iris.html" title="Knora IRIs"
             accesskey="P">previous</a> |
          <a href="knarql-syntax.html" title="KnarQL: Knora Query Language"
             accesskey="N">next</a> |
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="reading-and-searching-resources">
<span id="reading-and-searching-resources-v2"></span><h1>Reading and Searching Resources<a class="headerlink" href="#reading-and-searching-resources" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#get-the-representation-of-a-resource-by-its-iri" id="id1">Get the Representation of a Resource by its IRI</a><ul>
<li><a class="reference internal" href="#get-a-full-representation-of-a-resource-by-its-iri" id="id2">Get a Full Representation of a Resource by its IRI</a></li>
<li><a class="reference internal" href="#get-the-preview-of-a-resource-by-its-iri" id="id3">Get the preview of a resource by its IRI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#search-for-resources" id="id4">Search for Resources</a><ul>
<li><a class="reference internal" href="#search-for-a-resource-by-its-rdfs-label" id="id5">Search for a Resource by its <code class="docutils literal"><span class="pre">rdfs:label</span></code></a></li>
<li><a class="reference internal" href="#full-text-search" id="id6">Full-text Search</a></li>
<li><a class="reference internal" href="#extended-search" id="id7">Extended Search</a></li>
<li><a class="reference internal" href="#count-queries" id="id8">Count Queries</a></li>
</ul>
</li>
</ul>
</div>
<p>To retrieve an existing resource, the HTTP method <code class="docutils literal"><span class="pre">GET</span></code> has to be used. Reading resources may require authentication, since some resources may have restricted viewing permissions.</p>
<div class="section" id="get-the-representation-of-a-resource-by-its-iri">
<h2><a class="toc-backref" href="#id1">Get the Representation of a Resource by its IRI</a><a class="headerlink" href="#get-the-representation-of-a-resource-by-its-iri" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-a-full-representation-of-a-resource-by-its-iri">
<h3><a class="toc-backref" href="#id2">Get a Full Representation of a Resource by its IRI</a><a class="headerlink" href="#get-a-full-representation-of-a-resource-by-its-iri" title="Permalink to this headline">¶</a></h3>
<p>A full representation of resource can be obtained by making a GET request to the API providing its IRI. Because a Knora IRI has the format of a URL, its IRI has to be URL-encoded.</p>
<p>To get the resource with the IRI <code class="docutils literal"><span class="pre">http://data.knora.org/c5058f3a</span></code> (a book from the sample Incunabula project, which is included in the Knora API server&#8217;s test data), make a HTTP GET request to the <code class="docutils literal"><span class="pre">resources</span></code> route
(path segment <code class="docutils literal"><span class="pre">resources</span></code> in the API call) and append the URL-encoded IRI:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">HTTP</span> <span class="n">GET</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">http</span><span class="o">%</span><span class="mi">3</span><span class="n">A</span><span class="o">%</span><span class="mi">2</span><span class="n">F</span><span class="o">%</span><span class="mi">2</span><span class="n">Fdata</span><span class="o">.</span><span class="n">knora</span><span class="o">.</span><span class="n">org</span><span class="o">%</span><span class="mi">2</span><span class="n">Fc5058f3a</span>
</pre></div>
</div>
<p>If necessary, several resources can be queried at the same time, their IRIs separated by slashes. Please note that the amount of resources that can be queried in one requested is limited. See the settings for <code class="docutils literal"><span class="pre">app/v2</span></code> in <code class="docutils literal"><span class="pre">application.conf</span></code>.</p>
<p>More formally, the URL looks like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">HTTP</span> <span class="n">GET</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">resourceIRI</span><span class="p">(</span><span class="o">/</span><span class="n">anotherResourceIri</span><span class="p">)</span><span class="o">*</span>
</pre></div>
</div>
<p>The response to a resource request is a <code class="docutils literal"><span class="pre">ResourcesSequence</span></code> (see <a class="reference internal" href="response-formats.html#response-formats-v2"><span class="std std-ref">V2 Response Formats</span></a>).</p>
</div>
<div class="section" id="get-the-preview-of-a-resource-by-its-iri">
<h3><a class="toc-backref" href="#id3">Get the preview of a resource by its IRI</a><a class="headerlink" href="#get-the-preview-of-a-resource-by-its-iri" title="Permalink to this headline">¶</a></h3>
<p>In some cases, the client may only want to request the preview of a resource, which just provides its <code class="docutils literal"><span class="pre">rdfs:label</span></code> and type.</p>
<p>This works exactly like making a conventional resource request, using the path segment <code class="docutils literal"><span class="pre">resourcespreview</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">HTTP</span> <span class="n">GET</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">resourcespreview</span><span class="o">/</span><span class="n">resourceIRI</span><span class="p">(</span><span class="o">/</span><span class="n">anotherResourceIri</span><span class="p">)</span><span class="o">*</span>
</pre></div>
</div>
<p>The response to a resource preview request is a <code class="docutils literal"><span class="pre">ResourcesSequence</span></code> (see <a class="reference internal" href="response-formats.html#response-formats-v2"><span class="std std-ref">V2 Response Formats</span></a>).</p>
</div>
</div>
<div class="section" id="search-for-resources">
<h2><a class="toc-backref" href="#id4">Search for Resources</a><a class="headerlink" href="#search-for-resources" title="Permalink to this headline">¶</a></h2>
<div class="section" id="search-for-a-resource-by-its-rdfs-label">
<h3><a class="toc-backref" href="#id5">Search for a Resource by its <code class="docutils literal"><span class="pre">rdfs:label</span></code></a><a class="headerlink" href="#search-for-a-resource-by-its-rdfs-label" title="Permalink to this headline">¶</a></h3>
<p>Knora offers the possibility to search for resources by their <code class="docutils literal"><span class="pre">rdfs:label</span></code>. The use case for this search is to find a specific resource as you type. E.g., the user wants to get a list of resources whose <code class="docutils literal"><span class="pre">rdfs:label</span></code> contain some search terms separated by a whitespace character:</p>
<blockquote>
<div><ul class="simple">
<li>Zeit</li>
<li>Zeitg</li>
<li>...</li>
<li>Zeitglöcklein d</li>
<li>...</li>
<li>Zeitglöcklein des Lebens</li>
</ul>
</div></blockquote>
<p>With each character added to the last term, the selection gets more specific. The first term should at least contain four characters. To make this kind of &#8220;search as you type&#8221; possible, a wildcard character is automatically added to the last search term.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">HTTP</span> <span class="n">GET</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">searchbylabel</span><span class="o">/</span><span class="n">searchValue</span><span class="p">[</span><span class="n">limitToResourceClass</span><span class="o">=</span><span class="n">resourceClassIRI</span><span class="p">]</span>
<span class="p">[</span><span class="n">limitToProject</span><span class="o">=</span><span class="n">projectIRI</span><span class="p">][</span><span class="n">offset</span><span class="o">=</span><span class="n">Integer</span><span class="p">]</span>
</pre></div>
</div>
<p>The first parameter must be preceded by a question mark <code class="docutils literal"><span class="pre">?</span></code>, any following parameter by an ampersand <code class="docutils literal"><span class="pre">&amp;</span></code>.</p>
<p>The default value for the parameter <code class="docutils literal"><span class="pre">offset</span></code> is 0, which returns the first page of search results.
Subsequent pages of results can be fetched by increasing <code class="docutils literal"><span class="pre">offset</span></code> by one. The amount of results per page is defined in <code class="docutils literal"><span class="pre">app/v2</span></code> in <code class="docutils literal"><span class="pre">application.conf</span></code>.</p>
<p>The response to a label search request is a <code class="docutils literal"><span class="pre">ResourcesSequence</span></code> (see <a class="reference internal" href="response-formats.html#response-formats-v2"><span class="std std-ref">V2 Response Formats</span></a>).</p>
<p>For performance reasons, standoff markup is not queried for this route.</p>
</div>
<div class="section" id="full-text-search">
<h3><a class="toc-backref" href="#id6">Full-text Search</a><a class="headerlink" href="#full-text-search" title="Permalink to this headline">¶</a></h3>
<p>Knora offers a full-text search that searches through all textual representations of values and <code class="docutils literal"><span class="pre">rdfs:label</span></code> of resources.
You can separate search terms by a white space character and they will be combined using the Boolean <code class="docutils literal"><span class="pre">AND</span></code> operator.
Please note that the search terms have to be URL encoded.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">HTTP</span> <span class="n">GET</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">search</span><span class="o">/</span><span class="n">searchValue</span><span class="p">[</span><span class="n">limitToResourceClass</span><span class="o">=</span><span class="n">resourceClassIRI</span><span class="p">]</span>
<span class="p">[</span><span class="n">limitToProject</span><span class="o">=</span><span class="n">projectIRI</span><span class="p">][</span><span class="n">offset</span><span class="o">=</span><span class="n">Integer</span><span class="p">]</span>
</pre></div>
</div>
<p>Please note that the first parameter has to be preceded by a question mark <code class="docutils literal"><span class="pre">?</span></code>, any following parameter by an ampersand <code class="docutils literal"><span class="pre">&amp;</span></code>.</p>
<p>The default value for the parameter <code class="docutils literal"><span class="pre">offset</span></code> is 0 which returns the first page of search results.
Subsequent pages of results can be fetched by increasing <code class="docutils literal"><span class="pre">offset</span></code> by one. The amount of results per page is defined in <code class="docutils literal"><span class="pre">app/v2</span></code> in <code class="docutils literal"><span class="pre">application.conf</span></code>.</p>
<p>The response to a full-text search request is a <code class="docutils literal"><span class="pre">ResourcesSequence</span></code> (see <a class="reference internal" href="response-formats.html#response-formats-v2"><span class="std std-ref">V2 Response Formats</span></a>).</p>
</div>
<div class="section" id="extended-search">
<h3><a class="toc-backref" href="#id7">Extended Search</a><a class="headerlink" href="#extended-search" title="Permalink to this headline">¶</a></h3>
<p>For more complex queries than a full-text search, Knora offers extended search possibilities, enabling clients to search for resources with arbitrary characteristics, as well as for a graph of resources that are interconnected in some particular way. To do this, the client submits a query in KnarQL (Knora Query Language), which is based on SPARQL (see <a class="reference internal" href="knarql-syntax.html#knarql-syntax-v2"><span class="std std-ref">KnarQL: Knora Query Language</span></a>). The Knora API server pages the results, filters them to ensure that permissions are respected, and returns them in a Knora API format (currently only JSON-LD).</p>
<p>A KnarQL query can be URL-encoded and sent in a GET request to the extended search route.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">HTTP</span> <span class="n">GET</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">searchextended</span><span class="o">/</span><span class="n">KnarQLQuery</span>
</pre></div>
</div>
<p>In the future, POST requests will also be supported, to allow longer queries. See <a class="reference internal" href="knarql-syntax.html#knarql-syntax-v2"><span class="std std-ref">KnarQL: Knora Query Language</span></a> for detailed information about the query syntax and examples.</p>
<p>The response to an extended search request is a <code class="docutils literal"><span class="pre">ResourcesSequence</span></code> (see <a class="reference internal" href="response-formats.html#response-formats-v2"><span class="std std-ref">V2 Response Formats</span></a>).</p>
</div>
<div class="section" id="count-queries">
<h3><a class="toc-backref" href="#id8">Count Queries</a><a class="headerlink" href="#count-queries" title="Permalink to this headline">¶</a></h3>
<p>For both full full-text and KnarQL searches, a count query can be performed. The answer of a count query is the number of resources (a number) that matched the indicated search criteria without taking into consideration permissions.
This means that the client may not be able to access any of the resources matching the search criteria because of insufficient permissions. Insufficient permissions are intended to prevent a user from accessing a resource or any of its values, or even knowing about its IRI, but not to suppress information about the existence of such a resource.</p>
<p>In order to perform a count query, just append the segment <code class="docutils literal"><span class="pre">count</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">HTTP</span> <span class="n">GET</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">searchbylabel</span><span class="o">/</span><span class="n">count</span><span class="o">/</span><span class="n">searchValue</span><span class="p">[</span><span class="n">limitToResourceClass</span><span class="o">=</span><span class="n">resourceClassIRI</span><span class="p">]</span>
<span class="p">[</span><span class="n">limitToProject</span><span class="o">=</span><span class="n">projectIRI</span><span class="p">][</span><span class="n">offset</span><span class="o">=</span><span class="n">Integer</span><span class="p">]</span>

<span class="n">HTTP</span> <span class="n">GET</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">search</span><span class="o">/</span><span class="n">count</span><span class="o">/</span><span class="n">searchValue</span><span class="p">[</span><span class="n">limitToResourceClass</span><span class="o">=</span><span class="n">resourceClassIRI</span><span class="p">]</span>
<span class="p">[</span><span class="n">limitToProject</span><span class="o">=</span><span class="n">projectIRI</span><span class="p">][</span><span class="n">offset</span><span class="o">=</span><span class="n">Integer</span><span class="p">]</span>

<span class="n">HTTP</span> <span class="n">GET</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">host</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">searchextended</span><span class="o">/</span><span class="n">count</span><span class="o">/</span><span class="n">KnarQLQuery</span>
</pre></div>
</div>
<p>The first parameter has to be preceded by a question mark <code class="docutils literal"><span class="pre">?</span></code>, and any following parameter by an ampersand <code class="docutils literal"><span class="pre">&amp;</span></code>.</p>
<p>The response to a count query request is a <code class="docutils literal"><span class="pre">ResourcesSequence</span></code> (see <a class="reference internal" href="response-formats.html#response-formats-v2"><span class="std std-ref">V2 Response Formats</span></a>).</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../knora-ontologies/index.html">The Knora Ontologies</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Knora API Server</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../deployment/index.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../design-documentation/index.html">Knora API Server Design Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/index.html">Developing the Knora API Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_v1/index.html">Using API V1</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Using API V2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../salsah/index.html">SALSAH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sipi/index.html">Sipi</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="knora-iris.html" title="Knora IRIs"
              >previous</a> |
            <a href="knarql-syntax.html" title="KnarQL: Knora Query Language"
              >next</a> |
            <a href="../../../genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="../../../_sources/rst/knora-api-server/api_v2/reading-and-searching-resources.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Lukas Rosenthaler, Benjamin Geer, Ivan Subotic, Tobias Schweizer, André Kilchenmann, and Sepideh Alassi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>